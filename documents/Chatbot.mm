<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1507562896015" ID="ID_1336426443" MODIFIED="1507562904476" TEXT="Chatbot">
<node CREATED="1507562908957" ID="ID_1589730207" MODIFIED="1507562918434" POSITION="right" TEXT="Create User">
<node BACKGROUND_COLOR="#fe6777" CREATED="1507562924434" ID="ID_944595832" MODIFIED="1507566805797" TEXT="Show a registration form on wordpress"/>
<node BACKGROUND_COLOR="#fe6777" CREATED="1507562976102" ID="ID_1506887518" MODIFIED="1507566805798" TEXT="Use OAuth 2 to get fb user id/timezone"/>
<node BACKGROUND_COLOR="#fe6777" CREATED="1507563570566" ID="ID_254959295" MODIFIED="1507566805798" TEXT="Create the user in CRM"/>
<node CREATED="1507563033992" ID="ID_1040226557" MODIFIED="1507564216404" TEXT="Implement the service">
<node CREATED="1507563089293" ID="ID_1372101266" MODIFIED="1507563116849" TEXT="Create endpoint that can be called">
<node CREATED="1507563122717" ID="ID_769275468" MODIFIED="1507563138007" TEXT="Name - addUser"/>
<node CREATED="1507563138549" ID="ID_1350933414" MODIFIED="1507563170969" TEXT="Custom-Header - XGAC_TOKEN"/>
<node CREATED="1507563171483" ID="ID_1203714846" MODIFIED="1507563174033" TEXT="Params">
<node CREATED="1507563332966" ID="ID_213352651" MODIFIED="1507563338099" TEXT="user_details">
<node CREATED="1507563230739" ID="ID_1724399141" MODIFIED="1507563240810" TEXT="fb_user_id"/>
<node CREATED="1507563242127" ID="ID_32807301" MODIFIED="1507563251534" TEXT="fb_first_name"/>
<node CREATED="1507563251878" ID="ID_798096785" MODIFIED="1507563256593" TEXT="fb_last_name"/>
<node CREATED="1507563257262" ID="ID_1940204842" MODIFIED="1507563262063" TEXT="timezone"/>
</node>
<node CREATED="1507563275192" ID="ID_1502840232" MODIFIED="1507563304170" TEXT="optional - course_details">
<node CREATED="1507563533218" ID="ID_819003281" MODIFIED="1507563540145" TEXT="course_name"/>
<node CREATED="1507563540653" ID="ID_1045363554" MODIFIED="1507563548158" TEXT="start_date"/>
</node>
</node>
</node>
<node CREATED="1507563659440" ID="ID_1670062958" MODIFIED="1507563663784" TEXT="Define Model"/>
<node CREATED="1507563664216" ID="ID_1933306290" MODIFIED="1507563677675" TEXT="Implement the controller">
<node CREATED="1507563991385" ID="ID_900116699" MODIFIED="1507564000376" TEXT="validate token"/>
<node CREATED="1507564000827" ID="ID_1038257900" MODIFIED="1507564011250" TEXT="validate input params"/>
<node CREATED="1507564011614" ID="ID_1980715229" MODIFIED="1507564026479" TEXT="insert record into database"/>
<node CREATED="1507564032492" ID="ID_1094345327" MODIFIED="1507564476098" TEXT="If course details are provided schedule course for the user">
<arrowlink COLOR="#00ad2f" DESTINATION="ID_1700223894" ENDARROW="Default" ENDINCLINATION="367;0;" ID="Arrow_ID_765362276" STARTARROW="None" STARTINCLINATION="57;-104;"/>
</node>
</node>
</node>
</node>
<node CREATED="1507563622686" ID="ID_18543059" MODIFIED="1507564281335" POSITION="right" TEXT="Schedule a course for a user">
<node BACKGROUND_COLOR="#fe6777" CREATED="1507564246412" ID="ID_214205332" MODIFIED="1507566824985" TEXT="Let user choose the course on wordpress"/>
<node BACKGROUND_COLOR="#fe6777" CREATED="1507564266312" ID="ID_1237748185" MODIFIED="1507566824984" TEXT="Create entry in CRM"/>
<node CREATED="1507564281328" ID="ID_1781072062" MODIFIED="1507564289316" TEXT="Implement the service">
<node CREATED="1507564066743" ID="ID_519661147" MODIFIED="1507564074485" TEXT="Create endpoint ">
<node CREATED="1507564081991" ID="ID_373385978" MODIFIED="1507564097972" TEXT="Name - subscribeCourse"/>
<node CREATED="1507564098527" ID="ID_1251499943" MODIFIED="1507564110123" TEXT="Custom Header - XGAC_TOKEN"/>
<node CREATED="1507564111735" ID="ID_1062107784" MODIFIED="1507564114270" TEXT="Params">
<node CREATED="1507564118484" ID="ID_1050414030" MODIFIED="1507564129012" TEXT="fb_user_id"/>
<node CREATED="1507564131381" ID="ID_1536525480" MODIFIED="1507564147757" TEXT="course_details">
<node CREATED="1507564151311" ID="ID_1187709296" MODIFIED="1507564155169" TEXT="course_name"/>
<node CREATED="1507564155517" ID="ID_1274076907" MODIFIED="1507564160512" TEXT="start_date"/>
</node>
</node>
</node>
<node CREATED="1507564291058" ID="ID_376788855" MODIFIED="1507564299563" TEXT="Define Model"/>
<node CREATED="1507564299962" ID="ID_1700223894" MODIFIED="1507564476099" TEXT="Implment the controller">
<linktarget COLOR="#00ad2f" DESTINATION="ID_1700223894" ENDARROW="Default" ENDINCLINATION="367;0;" ID="Arrow_ID_765362276" SOURCE="ID_1094345327" STARTARROW="None" STARTINCLINATION="57;-104;"/>
<node CREATED="1507564310432" ID="ID_1849256099" MODIFIED="1507564328002" TEXT="update user record and set current course"/>
<node CREATED="1507564333282" ID="ID_146574907" MODIFIED="1507566728043" TEXT="create a schedule with respect to the start date and store it in the db">
<linktarget COLOR="#2550d9" DESTINATION="ID_146574907" ENDARROW="Default" ENDINCLINATION="318;-161;" ID="Arrow_ID_791491941" SOURCE="ID_1081836306" STARTARROW="None" STARTINCLINATION="-123;-60;"/>
</node>
</node>
</node>
</node>
<node CREATED="1507564487549" ID="ID_1208071022" MODIFIED="1507564499710" POSITION="right" TEXT="Course Delivery Service">
<node CREATED="1507564504406" ID="ID_1707996895" MODIFIED="1507564519794" TEXT="A Demon service that keeps running">
<node CREATED="1507564523200" ID="ID_148568304" MODIFIED="1507564596867" TEXT="Every hour - Query the jobs from now till next one hour"/>
<node CREATED="1507564599901" ID="ID_954075579" MODIFIED="1507564655372" TEXT="Schedule the calls for delivering the snippets to the users">
<node CREATED="1507564730662" ID="ID_1031705693" MODIFIED="1507564750404" TEXT="Each job will trigger the generic bot defined in chatfuel"/>
<node CREATED="1507564751363" ID="ID_466281045" MODIFIED="1507564779803" TEXT="Each job will first check the status of the snippet, if it is already delivered, skip"/>
<node CREATED="1507564780597" ID="ID_947672467" MODIFIED="1507564828245" TEXT="Each job will also update the status of the snippet once it is delivered/update the current snippet id inside user record"/>
</node>
</node>
<node CREATED="1507564664202" ID="ID_990836678" MODIFIED="1507564712329" TEXT="This should run as soon as the node server is up/restarted"/>
</node>
<node CREATED="1507565006701" ID="ID_80977914" MODIFIED="1507565039309" POSITION="right" TEXT="Populate Course Details from spreadsheet">
<node CREATED="1507565043366" ID="ID_1157756824" MODIFIED="1507565049408" TEXT="Define the spreadsheet format"/>
<node CREATED="1507565049850" ID="ID_1678038789" MODIFIED="1507565085777" TEXT="Create a job in that wil run on the local machine">
<node CREATED="1507565146388" ID="ID_1561703447" MODIFIED="1507565156331" TEXT="Parse the spread sheet rows"/>
<node CREATED="1507565156769" ID="ID_606079460" MODIFIED="1507565172019" TEXT="Create snippets according to the type"/>
<node CREATED="1507565172509" ID="ID_332292489" MODIFIED="1507565185638" TEXT="populate the data"/>
</node>
<node CREATED="1507565086928" ID="ID_1999826205" MODIFIED="1507565103793" TEXT="Implement the service end point on the server">
<node CREATED="1507565854046" ID="ID_1478124874" MODIFIED="1507565859952" TEXT="Create Endpoint">
<node CREATED="1507565706348" ID="ID_76447455" MODIFIED="1507565734374" TEXT="Name - updateCourse"/>
<node CREATED="1507563138549" ID="ID_1461475260" MODIFIED="1507563170969" TEXT="Custom-Header - XGAC_TOKEN"/>
<node CREATED="1507565735456" ID="ID_1497766951" MODIFIED="1507565763735" TEXT="Parameters">
<node CREATED="1507565817185" ID="ID_964512486" MODIFIED="1507565823433" TEXT="CourseJson"/>
</node>
</node>
<node CREATED="1507566028435" ID="ID_914546711" MODIFIED="1507566043939" TEXT="Define the model"/>
<node CREATED="1507566044442" ID="ID_1123558054" MODIFIED="1507566643624" TEXT="Implement the controller">
<node CREATED="1507566646578" ID="ID_515130960" MODIFIED="1507566652292" TEXT="update db record"/>
<node CREATED="1507566652877" ID="ID_1081836306" MODIFIED="1507566743292" TEXT="Recreate the schedule if this is update of existing course which is subscribed by students already">
<arrowlink COLOR="#2550d9" DESTINATION="ID_146574907" ENDARROW="Default" ENDINCLINATION="318;-161;" ID="Arrow_ID_791491941" STARTARROW="None" STARTINCLINATION="-123;-60;"/>
</node>
</node>
</node>
</node>
<node CREATED="1507566121441" ID="ID_545332388" MODIFIED="1507566197057" POSITION="right" TEXT="Export course details">
<node CREATED="1507566425685" ID="ID_1779732085" MODIFIED="1507566442912" TEXT="Strictly server side job - no service end point"/>
<node CREATED="1507566443319" ID="ID_613505357" MODIFIED="1507566489907" TEXT="This will dump the course details in specific spreadsheet template">
<node CREATED="1507566597799" ID="ID_1389593498" MODIFIED="1507566615839" TEXT="Needed if we want to quick modification to course contents"/>
</node>
</node>
</node>
</map>
